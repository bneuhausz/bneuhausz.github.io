<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
    <title>Angular PWA tutorial part 2 - New version notification - bneuhausz.dev</title>
    <base href="/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="impact-site-verification" value="fadbe9c7-c2b6-4441-b7ef-92e28101384e">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <script defer="" type="application/javascript" src="javascript/klaro/config.js"></script>
    <!-- <script defer src="/javascript/klaro/klaro.js"></script> -->
    <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1479748760290806" crossorigin="anonymous">
    </script>
    <script>
      (function(w,d,e,u,f,l,n){w[f]=w[f]||function(){(w[f].q=w[f].q||[])
      .push(arguments);},l=d.createElement(e),l.async=1,l.src=u,
      n=d.getElementsByTagName(e)[0],n.parentNode.insertBefore(l,n);})
      (window,document,'script','https://assets.mailerlite.com/js/universal.js','ml');
      ml('account', '1754906');
    </script>
    <script type="module" crossorigin="" src="/assets/index-D8FjB5gC.js"></script>
    <link rel="stylesheet" crossorigin="" href="/assets/index-Dojvpfv1.css">
  <style ng-app-id="ng">[_nghost-ng-c572653062]{display:inline-block;width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);line-height:initial;vertical-align:initial;overflow:hidden}[_nghost-ng-c572653062]     svg{width:inherit;height:inherit;vertical-align:inherit}@layer ng-icon{[_nghost-ng-c572653062]{color:var(--ng-icon__color, currentColor)}}</style><meta name="description" content="In part 2 of this series, we will take a look at how you can notify your users about a new version of your app being available"><meta property="og:title" content="Angular PWA tutorial part 2 - New version notification"><meta property="og:description" content="In part 2 of this series, we will take a look at how you can notify your users about a new version of your app being available"><meta property="og:image" content="https://bneuhausz.dev/images/bneuhausz_dev_twitter.png"><meta property="og:image:alt" content="bneuhausz.dev site logo"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Angular PWA tutorial part 2 - New version notification"><meta name="twitter:description" content="In part 2 of this series, we will take a look at how you can notify your users about a new version of your app being available"><meta name="twitter:image" content="https://bneuhausz.dev/images/bneuhausz_dev_twitter.png"><meta name="twitter:image:alt" content="bneuhausz.dev site logo"><script type="application/ld+json" id="blogpost-ldjson">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Angular PWA tutorial part 2 - New version notification","image":"/images/angular_gradient_thumbnail.avif","author":{"@type":"Person","name":"BÃ¡lint Neuhausz","url":"https://bneuhausz.dev"},"publisher":{"@type":"Organization","name":"bneuhausz.dev","logo":{"@type":"ImageObject","url":"https://bneuhausz.dev/images/nb_logo_small.avif"}},"datePublished":"2025-08-25T00:00:00.000Z","description":"In part 2 of this series, we will take a look at how you can notify your users about a new version of your app being available"}</script><link rel="canonical" href="https://yourdomain.com/blog/angular-pwa-tutorial-part-2"></head>
  <body class="text-center h-screen w-screen overflow-x-hidden"><!--nghm-->
    <app-root ng-version="19.2.9" class="flex flex-col h-screen" ngh="3" ng-server-context="ssr-analog"><appheader ngh="0"><nav class="navbar bg-neutral text-amber-100 gap-2 px-8"><a routerlink="/" href="/"><img src="/images/nb_logo_small.avif" alt="logo of the site"></a><a routerlink="/blog" class="btn btn-square btn-ghost hover:bg-amber-100 hover:text-amber-900 px-8" href="/blog"> Blog </a><a routerlink="/about" class="btn btn-square btn-ghost hover:bg-amber-100 hover:text-amber-900 px-8" href="/about"> About </a><a routerlink="/contact" class="btn btn-square btn-ghost hover:bg-amber-100 hover:text-amber-900 px-8" href="/contact"> Contact </a><span class="flex-1"></span><a href="https://github.com/bneuhausz" target="_blank" rel="noopener"><div class="w-5 h-5 ml-3 bg-amber-100 github-icon"></div></a><a href="https://x.com/bneuhausz" target="_blank" rel="noopener" class="flex items-center ml-3"><ng-icon role="img" name="faBrandSquareXTwitter" _nghost-ng-c572653062="" aria-hidden="true" data-ng-icon-ssr="" style="--ng-icon__size: 1.5em;" ngh="0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor"><path d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm297.1 84L257.3 234.6 379.4 396H283.8L209 298.1 123.3 396H75.8l111-126.9L69.7 116h98l67.7 89.5L313.6 116h47.5zM323.3 367.6L153.4 142.9H125.1L296.9 367.6h26.3z"></path></svg></ng-icon></a><a href="mailto:bneuhauszdev@gmail.com" class="flex items-center ml-3"><ng-icon role="img" name="heroEnvelopeSolid" _nghost-ng-c572653062="" aria-hidden="true" data-ng-icon-ssr="" style="--ng-icon__size: 1.5em;" ngh="0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon"><path d="M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"></path><path d="M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"></path></svg></ng-icon></a></nav></appheader><main class="flex-1 py-4 md:px-4 bg-neutral-800 text-amber-100"><router-outlet></router-outlet><div slug="" ngh="2"><article class="flex flex-col items-center *:max-w-screen-xl *:mx-8 md:*:mx-32 pb-8"><img sizes="(max-width: 1280px) 100vw, 1280px" class="w-full h-auto" srcset="/images/angular_wordmark_gradient_header_small.avif 480w, /images/angular_wordmark_gradient_header_medium.avif 800w, /images/angular_wordmark_gradient_header.avif 1280w" src="/images/angular_wordmark_gradient_header.avif" alt="angular gradient image"><p class="flex flex-row items-center my-4"><span>2025-08-25</span><a href="https://github.com/bneuhausz" target="_blank" rel="noopener" class="flex items-center"><span class="w-5 h-5 ml-3 bg-amber-100 github-icon"></span></a><a href="https://x.com/bneuhausz" target="_blank" rel="noopener" class="flex items-center ml-3"><ng-icon role="img" name="faBrandSquareXTwitter" _nghost-ng-c572653062="" aria-hidden="true" data-ng-icon-ssr="" style="--ng-icon__size: 1.5em;" ngh="0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor"><path d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm297.1 84L257.3 234.6 379.4 396H283.8L209 298.1 123.3 396H75.8l111-126.9L69.7 116h98l67.7 89.5L313.6 116h47.5zM323.3 367.6L153.4 142.9H125.1L296.9 367.6h26.3z"></path></svg></ng-icon></a><a href="mailto:bneuhauszdev@gmail.com" class="flex items-center ml-3"><ng-icon role="img" name="heroEnvelopeSolid" _nghost-ng-c572653062="" aria-hidden="true" data-ng-icon-ssr="" style="--ng-icon__size: 1.5em;" ngh="0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon"><path d="M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"></path><path d="M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"></path></svg></ng-icon></a></p><div appcodecopybutton="" appexternallinks="" class="prose dark:prose-invert text-left mb-8"><analog-markdown ngh="1"><div class="analog-markdown"><h1 id="angular-pwa-tutorial-part-2---new-version-notification">Angular PWA tutorial part 2 - New version notification</h1>
<blockquote>
<sub>
<b>Changelog:</b><br>
<b>2025-08-27:</b> Added link to GitHub and part 3.<br>
</sub></blockquote>
<p>In part 2 of this series, we will take a look at how you can notify your users about a new version of your app being available.</p><p>In case you've missed part 1 about the setup, <a href="https://bneuhausz.dev/blog/angular-pwa-tutorial-part-1">you can get up to speed here.</a></p><h2 id="a-bit-of-styling">A bit of styling</h2>
<p>In the post about the setup, I said we will not spend much time on making the app look good. That said, we'll add a bit of VERY basic CSS, just so we won't want to crawl our eyes out every time we look at our app.</p><p>Let's add the following to <code>styles.scss</code>:</p><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#B392F0">:root</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  --background-color</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">#d7c9c9</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  --primary-color</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">#071793</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  --on-primary-color</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">#ffffff</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">body</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">  background</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">var</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">--background-color</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">button</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">  background-color</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">var</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">--primary-color</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#79B8FF">  color</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">var</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">--on-primary-color</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#79B8FF">  border-radius</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">8</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">  padding</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">4</span><span style="color:#F97583">px</span><span style="color:#79B8FF"> 8</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">  margin</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">0</span><span style="color:#79B8FF"> 4</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>We've just added a bit darker background and styled our buttons a bit. It's not pretty, but at least it doesn't hurt to look at it. Moving forward, we might tweak some things here and there, but we might end up with this being our final form. We'll see.</p><h2 id="introducing-the-swupdate-service">Introducing the SwUpdate service</h2>
<p>The <code>@angular/service-worker</code> package provides us with a service called <code>SwUpdate</code>. This service lets us communicate with the service worker that is running in the background. With its help, we can subscribe to the <code>versionUpdates</code> observable and react to events emitted by it. We can also manually check for updates with the <code>checkForUpdate</code> method.</p><p>There are 5 events we can react to:</p><ul>
<li><code>VersionDetectedEvent</code></li>
<li><code>NoNewVersionDetectedEvent</code></li>
<li><code>VersionReadyEvent</code></li>
<li><code>VersionInstallationFailedEvent</code></li>
<li><code>VersionFailedEvent</code></li>
</ul>
<p><code>SwUpdate</code> checks for a new version of the app when you start your installed app from the home screen or when you navigate to your app from another address in the browser.</p><p>Right now, we are interested in <code>VersionReadyEvent</code>, but you can read a bit more about these <a href="https://angular.dev/ecosystem/service-workers/communications">here.</a></p><h2 id="handling-versionreadyevent">Handling VersionReadyEvent</h2>
<p>First thing first, I'll show the implemented code, then we will discuss the new additions to the code.</p><p>Update your <code>app.ts</code> to reflect the following:</p><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Component, inject, signal } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '@angular/core'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { RouterOutlet } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '@angular/router'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { NetworkService } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> './shared/network/network'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { SwUpdate, VersionReadyEvent } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '@angular/service-worker'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { filter } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'rxjs'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#B392F0">Component</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  selector: </span><span style="color:#9ECBFF">'app-root'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  imports: [RouterOutlet],</span></span>
<span class="line"><span style="color:#E1E4E8">  template: </span><span style="color:#9ECBFF">`</span></span>
<span class="line"><span style="color:#F97583">    @if</span><span style="color:#E1E4E8"> (</span><span style="color:#B392F0">isNewVersionReady</span><span style="color:#E1E4E8">()) {</span></span>
<span class="line"><span style="color:#E1E4E8">      &lt;</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">&gt;ð New version available! Please reload the application.&lt;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">      &lt;</span><span style="color:#85E89D">button</span><span style="color:#B392F0"> (click)</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"reload()"</span><span style="color:#E1E4E8">&gt;Reload&lt;/</span><span style="color:#85E89D">button</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">    &lt;</span><span style="color:#85E89D">h1</span><span style="color:#E1E4E8">&gt;Welcome to {{ </span><span style="color:#B392F0">title</span><span style="color:#E1E4E8">() }}!!&lt;/</span><span style="color:#85E89D">h1</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#F97583">    @if</span><span style="color:#E1E4E8"> (network.</span><span style="color:#B392F0">isOffline</span><span style="color:#E1E4E8">()) {</span></span>
<span class="line"><span style="color:#E1E4E8">      &lt;</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">&gt;ð« Offline&lt;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    &lt;</span><span style="color:#85E89D">router-outlet</span><span style="color:#E1E4E8"> /&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">  `</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">})</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> App</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  protected</span><span style="color:#F97583"> readonly</span><span style="color:#FFAB70"> network</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> inject</span><span style="color:#E1E4E8">(NetworkService);</span></span>
<span class="line"><span style="color:#F97583">  private</span><span style="color:#F97583"> readonly</span><span style="color:#FFAB70"> swUpdate</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> inject</span><span style="color:#E1E4E8">(SwUpdate);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  protected</span><span style="color:#F97583"> readonly</span><span style="color:#FFAB70"> title</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> signal</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'pwa-tutorial'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">  protected</span><span style="color:#F97583"> readonly</span><span style="color:#FFAB70"> isNewVersionReady</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> signal</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  constructor</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.swUpdate.isEnabled) {</span></span>
<span class="line"><span style="color:#79B8FF">      this</span><span style="color:#E1E4E8">.swUpdate.versionUpdates</span></span>
<span class="line"><span style="color:#E1E4E8">        .</span><span style="color:#B392F0">pipe</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">filter</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">event</span><span style="color:#F97583"> =&gt;</span><span style="color:#E1E4E8"> event.type </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> 'VERSION_READY'</span><span style="color:#E1E4E8">))</span></span>
<span class="line"><span style="color:#E1E4E8">        .</span><span style="color:#B392F0">subscribe</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">event</span><span style="color:#F97583">:</span><span style="color:#B392F0"> VersionReadyEvent</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">          this</span><span style="color:#E1E4E8">.isNewVersionReady.</span><span style="color:#B392F0">set</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">        });</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  protected</span><span style="color:#B392F0"> reload</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">    window.location.</span><span style="color:#B392F0">reload</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>We've injected the <code>SwUpdate</code> service. Also, the <code>isNewVersionReady</code> signal was added with the initial value set to false. The only purpose of this signal is to control the appearance of our new version notification in the template, which we've also added.</p><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">private readonly swUpdate </span><span style="color:#F97583">=</span><span style="color:#B392F0"> inject</span><span style="color:#E1E4E8">(SwUpdate);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">protected readonly isNewVersionReady </span><span style="color:#F97583">=</span><span style="color:#B392F0"> signal</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">);</span></span></code></pre>
<pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">@if</span><span style="color:#E1E4E8"> (</span><span style="color:#B392F0">isNewVersionReady</span><span style="color:#E1E4E8">()) {</span></span>
<span class="line"><span style="color:#E1E4E8">  &lt;</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">&gt;ð New version available! Please reload the application.&lt;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">  &lt;</span><span style="color:#85E89D">button</span><span style="color:#B392F0"> (click)</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"reload()"</span><span style="color:#E1E4E8">&gt;Reload&lt;/</span><span style="color:#85E89D">button</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>We've also added the reload function, which is pretty self-explanatory, it reloads our application:</p><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">protected </span><span style="color:#B392F0">reload</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">  window.location.</span><span style="color:#B392F0">reload</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>Now, the interesting part.</p><p>First, in the constructor, we check, if service workers are enabled. We don't want to cause errors if the user disables them in their browser. If that's the case, they should be able to use our app as a regular webapp. A PWA is still a webapp after all.</p><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#B392F0">constructor</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.swUpdate.isEnabled) {</span></span>
<span class="line"><span style="color:#6A737D">    // ...</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>If this check is passed, then we subscribe to the <code>versionUpdates</code> <code>Observable</code>, but first, we filter the events so we are only reacting if the event was fired to notify us of a new version being ready:</p><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.swUpdate.versionUpdates</span></span>
<span class="line"><span style="color:#E1E4E8">  .</span><span style="color:#B392F0">pipe</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">filter</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">event</span><span style="color:#F97583"> =&gt;</span><span style="color:#E1E4E8"> event.type </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> 'VERSION_READY'</span><span style="color:#E1E4E8">))</span></span>
<span class="line"><span style="color:#E1E4E8">  .</span><span style="color:#B392F0">subscribe</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">event</span><span style="color:#F97583">:</span><span style="color:#B392F0"> VersionReadyEvent</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.isNewVersionReady.</span><span style="color:#B392F0">set</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span></code></pre>
<p>If the new version is ready, we set <code>isNewVersionReady</code> to true and our template does the rest. Rebuild your app and restart the server:</p><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#B392F0">ng</span><span style="color:#9ECBFF"> build</span></span></code></pre>
<p>then</p><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#B392F0">npx</span><span style="color:#9ECBFF"> http-server</span><span style="color:#79B8FF"> -p</span><span style="color:#79B8FF"> 8080</span><span style="color:#79B8FF"> -c-1</span><span style="color:#9ECBFF"> dist/pwa-tutorial/browser</span></span></code></pre>
<p>The next time you start the application from the home screen, after a few seconds, you should see the following:</p><p><img src="/images/pwa-tutorial/part-2/new_version_notification.avif" alt="in app version notification"></p><p>If the user clicks the reload button, the app will reload and they instantly have access to the new version. If they choose not to reload, the new version was still downloaded in the background and after they refresh or they open the app the next time, the new version will be loaded.</p><p>One important note is that you have to change something in your application that changes the build output to register it as a new version, so make sure something changes in your html, css and javascript before you create a new build for the notification to work.</p><p>The complete code for this chapter is available <a href="https://github.com/bneuhausz/pwa-tutorial/tree/part-2">here.</a></p><p><a href="https://bneuhausz.dev/blog/angular-pwa-tutorial-part-3">Part 3 of this series, where we implement a simple backend for push notifications has been released, you can find it here.</a></p></div><!----></analog-markdown></div><section class="flex flex-col md:flex-row gap-6 items-center"><div class="card w-full sm:w-96 h-60 bg-neutral text-amber-100 card-xl shadow-sm"><div class="card-body items-center"><h2 class="card-title">Follow me on <ng-icon role="img" name="faBrandSquareXTwitter" _nghost-ng-c572653062="" aria-hidden="true" data-ng-icon-ssr="" style="--ng-icon__size: 1.5em;" ngh="0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor"><path d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm297.1 84L257.3 234.6 379.4 396H283.8L209 298.1 123.3 396H75.8l111-126.9L69.7 116h98l67.7 89.5L313.6 116h47.5zM323.3 367.6L153.4 142.9H125.1L296.9 367.6h26.3z"></path></svg></ng-icon>!</h2><p>I post updates and small snippets. If you find these posts interesting or useful, I'd greatly appreciate a follow!</p><div class="card-actions"><a target="_blank" rel="noopener" href="https://x.com/bneuhausz" class="btn btn-ghost hover:bg-amber-100 hover:text-amber-900">Follow</a></div></div></div><div class="card w-full sm:w-96 h-60 bg-neutral text-amber-100 card-xl shadow-sm"><div class="card-body items-center"><h2 class="card-title">Newsletter</h2><p>Sign up for my - probably - monthly newsletter to receive updates about new posts and possibly other content!</p><div class="card-actions"><button onclick="ml('show', 'QIrGIF', true)" class="ml-onclick-form btn btn-ghost hover:bg-amber-100 hover:text-amber-900">Subscribe</button></div></div></div></section></article><!----></div><!----></main><appfooter ngh="0"><footer class="footer-horizontal bg-neutral text-amber-100 p-4"><aside class="flex gap-8 justify-center"><a routerlink="/creative-commons" href="/creative-commons">Â© Creative Commons</a><a routerlink="/privacy" href="/privacy">Privacy Policy</a></aside></footer></appfooter></app-root>
    
  

<script id="ng-state" type="application/json">{"__nghData__":[{},{"c":{"0":[]}},{"t":{"0":"t5"},"c":{"0":[{"i":"t5","r":1}]}},{"c":{"2":[{"i":"c3950890797","r":1}]}}]}</script></body></html>