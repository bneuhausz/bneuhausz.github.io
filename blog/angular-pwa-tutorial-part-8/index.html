<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
    <title>Angular PWA tutorial part 8 - Adding our own install button - bneuhausz.dev</title>
    <base href="/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="impact-site-verification" value="fadbe9c7-c2b6-4441-b7ef-92e28101384e">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <script defer="" type="application/javascript" src="javascript/klaro/config.js"></script>
    <!-- <script defer src="/javascript/klaro/klaro.js"></script> -->
    <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1479748760290806" crossorigin="anonymous">
    </script>
    <script>
      (function(w,d,e,u,f,l,n){w[f]=w[f]||function(){(w[f].q=w[f].q||[])
      .push(arguments);},l=d.createElement(e),l.async=1,l.src=u,
      n=d.getElementsByTagName(e)[0],n.parentNode.insertBefore(l,n);})
      (window,document,'script','https://assets.mailerlite.com/js/universal.js','ml');
      ml('account', '1754906');
    </script>
    <script type="module" crossorigin="" src="/assets/index-Ds1THEmd.js"></script>
    <link rel="stylesheet" crossorigin="" href="/assets/index-guJYqCx_.css">
  <style ng-app-id="ng">[_nghost-ng-c572653062]{display:inline-block;width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);line-height:initial;vertical-align:initial;overflow:hidden}[_nghost-ng-c572653062]     svg{width:inherit;height:inherit;vertical-align:inherit}@layer ng-icon{[_nghost-ng-c572653062]{color:var(--ng-icon__color, currentColor)}}</style><meta name="description" content="In part 8 of this series, we will create our own install button"><meta property="og:title" content="Angular PWA tutorial part 8 - Adding our own install button"><meta property="og:description" content="In part 8 of this series, we will create our own install button"><meta property="og:image" content="https://bneuhausz.dev/images/bneuhausz_dev_twitter.png"><meta property="og:image:alt" content="bneuhausz.dev site logo"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Angular PWA tutorial part 8 - Adding our own install button"><meta name="twitter:description" content="In part 8 of this series, we will create our own install button"><meta name="twitter:image" content="https://bneuhausz.dev/images/bneuhausz_dev_twitter.png"><meta name="twitter:image:alt" content="bneuhausz.dev site logo"><script type="application/ld+json" id="blogpost-ldjson">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Angular PWA tutorial part 8 - Adding our own install button","image":"/images/angular_gradient_thumbnail.avif","author":{"@type":"Person","name":"Bálint Neuhausz","url":"https://bneuhausz.dev"},"publisher":{"@type":"Organization","name":"bneuhausz.dev","logo":{"@type":"ImageObject","url":"https://bneuhausz.dev/images/nb_logo_small.avif"}},"datePublished":"2025-09-20T00:00:00.000Z","description":"In part 8 of this series, we will create our own install button"}</script><link rel="canonical" href="https://yourdomain.com/blog/angular-pwa-tutorial-part-8"></head>
  <body class="text-center h-screen w-screen overflow-x-hidden"><!--nghm-->
    <app-root ng-version="19.2.9" class="flex flex-col h-screen" ngh="3" ng-server-context="ssr-analog"><appheader ngh="0"><nav class="navbar bg-neutral text-amber-100 gap-2 px-8"><a routerlink="/" href="/"><img src="/images/nb_logo_small.avif" alt="logo of the site"></a><a routerlink="/blog" class="btn btn-square btn-ghost hover:bg-amber-100 hover:text-amber-900 px-8" href="/blog"> Blog </a><a routerlink="/about" class="btn btn-square btn-ghost hover:bg-amber-100 hover:text-amber-900 px-8" href="/about"> About </a><span class="flex-1"></span><a href="https://github.com/bneuhausz" target="_blank" rel="noopener"><div class="w-5 h-5 ml-3 bg-amber-100 github-icon"></div></a><a href="mailto:bneuhauszdev@gmail.com" class="flex items-center ml-3"><ng-icon role="img" name="heroEnvelopeSolid" _nghost-ng-c572653062="" aria-hidden="true" data-ng-icon-ssr="" style="--ng-icon__size: 1.5em;" ngh="0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon"><path d="M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"></path><path d="M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"></path></svg></ng-icon></a></nav></appheader><main class="flex-1 py-4 md:px-4 bg-neutral-800 text-amber-100"><router-outlet></router-outlet><div slug="" ngh="2"><article class="flex flex-col items-center *:max-w-screen-xl *:mx-8 md:*:mx-32 pb-8"><img sizes="(max-width: 1280px) 100vw, 1280px" class="w-full h-auto" srcset="/images/angular_wordmark_gradient_header_small.avif 480w, /images/angular_wordmark_gradient_header_medium.avif 800w, /images/angular_wordmark_gradient_header.avif 1280w" src="/images/angular_wordmark_gradient_header.avif" alt="angular gradient image"><p class="flex flex-row items-center my-4"><span>2025-09-20</span><a href="https://github.com/bneuhausz" target="_blank" rel="noopener" class="flex items-center"><span class="w-5 h-5 ml-3 bg-amber-100 github-icon"></span></a><a href="mailto:bneuhauszdev@gmail.com" class="flex items-center ml-3"><ng-icon role="img" name="heroEnvelopeSolid" _nghost-ng-c572653062="" aria-hidden="true" data-ng-icon-ssr="" style="--ng-icon__size: 1.5em;" ngh="0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon"><path d="M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"></path><path d="M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"></path></svg></ng-icon></a></p><div appcodecopybutton="" appexternallinks="" class="prose dark:prose-invert text-left mb-8"><analog-markdown ngh="1"><div class="analog-markdown"><h1 id="angular-pwa-tutorial-part-8---adding-our-own-install-button">Angular PWA tutorial part 8 - Adding our own install button</h1>
<p>Today, we will create our own install button, but this article builds on the earlier pieces of this series. In case you are new here, make sure to catch up on them:</p><ul>
<li><a href="https://bneuhausz.dev/blog/angular-pwa-tutorial-part-1">Setup</a></li>
<li><a href="https://bneuhausz.dev/blog/angular-pwa-tutorial-part-2">New version notification</a></li>
<li><a href="https://bneuhausz.dev/blog/angular-pwa-tutorial-part-3">Node backend for sending push notifications</a></li>
<li><a href="https://bneuhausz.dev/blog/angular-pwa-tutorial-part-4">Push notification frontend implementation</a></li>
<li><a href="https://bneuhausz.dev/blog/angular-pwa-tutorial-part-5">Controlling appearance and installability</a></li>
<li><a href="https://bneuhausz.dev/blog/angular-pwa-tutorial-part-6">Let's talk caching</a></li>
<li><a href="https://bneuhausz.dev/blog/angular-pwa-tutorial-part-7">Deploying our apps to GitHub Pages and Render</a></li>
</ul>
<p>As always, the complete source code will be available <a href="https://github.com/bneuhausz/pwa-tutorial/tree/part-8">here.</a></p><h2 id="installing-a-pwa">Installing a PWA</h2>
<p>We can install PWAs to our home screen, which is great. However, if your users are not developers or tech-savvy people themselves, this may be a pretty big barrier to entry. They might not know about the possibility of installing a PWA to begin with. Even if they do, they might not notice the small icon in the browser's address bar and installing the app through the share submenu is inconvenient, to say the least. So let's take a look at implementing our own install button, that prompts our users to install the app.</p><p>As a sidenote, there are ways to get your PWA to app stores, like <a href="https://developers.google.com/codelabs/pwa-in-play#0">Bubblewrap when it comes to Google Play</a>, but that is out of scope, at least in this specific article.</p><h2 id="prompting-our-users">Prompting our users</h2>
<p>We'll create a service that will handle the prompting. In <code>src/app/shared</code>, create an <code>install</code> folder and add <code>install.ts</code> with the following content:</p><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Injectable, signal } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> "@angular/core"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#B392F0">Injectable</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  providedIn: </span><span style="color:#9ECBFF">'root'</span></span>
<span class="line"><span style="color:#E1E4E8">})</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> InstallService</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  #deferredPrompt</span><span style="color:#F97583">?:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFAB70">  canInstall</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> signal</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  constructor</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">    window.</span><span style="color:#B392F0">addEventListener</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'beforeinstallprompt'</span><span style="color:#E1E4E8">, (</span><span style="color:#FFAB70">e</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">      e.</span><span style="color:#B392F0">preventDefault</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#79B8FF">      this</span><span style="color:#E1E4E8">.#deferredPrompt </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> e;</span></span>
<span class="line"><span style="color:#79B8FF">      this</span><span style="color:#E1E4E8">.canInstall.</span><span style="color:#B392F0">set</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  promptToInstall</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> void</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.#deferredPrompt) {</span></span>
<span class="line"><span style="color:#F97583">      return</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.#deferredPrompt.</span><span style="color:#B392F0">prompt</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.#deferredPrompt.userChoice.</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">      this</span><span style="color:#E1E4E8">.#deferredPrompt </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> null</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">      this</span><span style="color:#E1E4E8">.canInstall.</span><span style="color:#B392F0">set</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  public</span><span style="color:#B392F0"> isSafari</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> userAgent</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> window.navigator.userAgent.</span><span style="color:#B392F0">toLowerCase</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#9ECBFF"> /</span><span style="color:#DBEDFF">iphone</span><span style="color:#F97583">|</span><span style="color:#DBEDFF">ipad</span><span style="color:#F97583">|</span><span style="color:#DBEDFF">ipod</span><span style="color:#9ECBFF">/</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">test</span><span style="color:#E1E4E8">(userAgent) </span><span style="color:#F97583">&amp;&amp;</span><span style="color:#F97583"> !</span><span style="color:#9ECBFF">/</span><span style="color:#DBEDFF">crios</span><span style="color:#F97583">|</span><span style="color:#DBEDFF">fxios</span><span style="color:#F97583">|</span><span style="color:#DBEDFF">edgios</span><span style="color:#9ECBFF">/</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">test</span><span style="color:#E1E4E8">(userAgent);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>Let's explain things. First, let's talk about the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeinstallprompt_event">beforeinstallprompt event</a>. This event fires when the browser has detected that the opened website can be installed as a PWA. It should be noted, that this is NOT supported in Safari and Firefox, so in case your users are likely to use those browsers, you need to handle those cases separately. Sadly, in those browsers, you can't add your own install button, so you would likely have to create some guides about how installing the app works and show that instead.</p><p>You can check if the app is running in a certain environment. I've added the <code>isSafari</code> helper as an example, but from now on, we'll base everything on the assumption that we are working with a Chromium based browser, like Chrome, Edge or Opera, because only those are relevant for us here.</p><p>Either way, in the constructor of our service, we add a listener to the <code>beforeinstallprompt</code> event. When it fires, we do two things. We set our <code>canInstall</code> signal to true, which will be important when it comes to the UI, and after preventing the default functionality, we store the prompt in our <code>#deferredPrompt</code> variable. We'll use this variable later, to open a dialog that let's the user to install the app. It's the same functionality that happens, when you click the small install button in the address bar in the desktop version of Chrome.</p><p>Notice, that <code>#deferredPrompt</code> is of type <code>any</code>. We'll use <code>any</code>, because <code>BeforeInstallPromptEvent</code> is not baseline due to, as I mentioned, Safari and Firefox not supporting it. You can define your own interface and inherit most of it from <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event">Event</a> if you wish, but for now it really doesn't matter.</p><p>This leaves us with the <code>promptToInstall</code> function, which is pretty self-explanatory. We will use this function when our user clicks our install button, and it handles the actual prompting.</p><h2 id="handling-the-ui">Handling the UI</h2>
<p>With our service created, let's start working on <code>app.ts</code>. Before we do anything else, we have to inject <code>InstallService</code> and define some signals:</p><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">protected readonly install </span><span style="color:#F97583">=</span><span style="color:#B392F0"> inject</span><span style="color:#E1E4E8">(InstallService);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">readonly #isInstalled </span><span style="color:#F97583">=</span><span style="color:#B392F0"> signal</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">protected readonly showInstallButton </span><span style="color:#F97583">=</span><span style="color:#B392F0"> computed</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=&gt;</span><span style="color:#F97583"> !</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">#isInstalled</span><span style="color:#E1E4E8">() </span><span style="color:#F97583">&amp;&amp;</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.install.</span><span style="color:#B392F0">canInstall</span><span style="color:#E1E4E8">());</span></span></code></pre>
<p>Then, we have to check in the <code>constructor</code>, if the app is already installed:</p><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#B392F0">constructor</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#6A737D">  //...</span></span>
<span class="line"><span style="color:#6A737D">  // the original code before this remains the same</span></span>
<span class="line"><span style="color:#B392F0">  afterNextRender</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> isRunningAsApp</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (window.</span><span style="color:#B392F0">matchMedia</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'(display-mode: standalone)'</span><span style="color:#E1E4E8">).matches) </span><span style="color:#F97583">||</span><span style="color:#E1E4E8"> (window.</span><span style="color:#B392F0">matchMedia</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'(display-mode: minimal-ui)'</span><span style="color:#E1E4E8">).matches);</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.#isInstalled.</span><span style="color:#B392F0">set</span><span style="color:#E1E4E8">(isRunningAsApp);</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>We check if the app is running in <code>standalone</code> or <code>minimal-ui</code> mode, so we can hide our install button if there is no need to show it. The good thing about <code>afterNextRender</code> - compared to <code>ngOnInit</code> - is that it only runs in a browser environment, so accessing <code>window</code> in it does not cause issues. If <code>isRunningAsApp</code> evaluates to true, we set <code>#isInstalled</code> to true, which we use when we determine if the install button should be rendered. The <code>showInstallButton</code> computed signal will be true, if our app is not yet installed (or at least isn't running in <code>standalone</code> or <code>minimal-ui</code> mode) and the <code>beforeinstallprompt</code> event has fired and we've set <code>canInstall</code> in our service to true.</p><p>After this, all we have to do is add the install button to our template:</p><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">@if</span><span style="color:#E1E4E8"> (</span><span style="color:#B392F0">showInstallButton</span><span style="color:#E1E4E8">()) {</span></span>
<span class="line"><span style="color:#E1E4E8">  &lt;</span><span style="color:#85E89D">button</span><span style="color:#B392F0"> (click)</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"install.promptToInstall()"</span><span style="color:#E1E4E8">&gt;Install App&lt;/</span><span style="color:#85E89D">button</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>If everything went right, after the next time you run your app, assuming it is not yet installed or you uninstalled it, you should see our install button on the screen:</p><p><img src="/images/pwa-tutorial/part-8/install_button.png" alt="install button"></p><p><a href="https://bneuhausz.dev/pwa-tutorial/">The live demo of this application can be accessed here.</a></p></div><!----></analog-markdown></div></article><!----></div><!----></main><appfooter ngh="0"><footer class="footer-horizontal bg-neutral text-amber-100 p-4"><aside class="flex gap-8 justify-center"><a routerlink="/creative-commons" href="/creative-commons">© Creative Commons</a><a routerlink="/privacy" href="/privacy">Privacy Policy</a></aside></footer></appfooter></app-root>
    
  

<script id="ng-state" type="application/json">{"__nghData__":[{},{"c":{"0":[]}},{"t":{"0":"t5"},"c":{"0":[{"i":"t5","r":1}]}},{"c":{"2":[{"i":"c3636043166","r":1}]}}]}</script></body></html>